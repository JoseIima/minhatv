<!doctype html>
<html lang="pt-br">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Minha TV</title>

<style>
  :root{
    --bg:#0b0b0f;
    --card:#18181f;
    --line:rgba(255,255,255,.10);
    --txt:#fff;
    --muted:rgba(255,255,255,.75);
    font-family: Arial, Helvetica, sans-serif;
  }

  body{ margin:0; background:var(--bg); color:var(--txt); }

  header{
    padding:18px 20px;
    font-size:22px;
    font-weight:900;
    border-bottom:1px solid rgba(255,255,255,.08);
  }
  header .sub{ display:block; font-size:13px; color:var(--muted); font-weight:500; margin-top:6px; }

  .wrap{ padding:18px; max-width:1200px; margin:0 auto; }

  input{
    background:rgba(0,0,0,.25);
    border:1px solid rgba(255,255,255,.14);
    color:#fff;
    padding:10px 12px;
    border-radius:12px;
    font-size:14px;
    outline:none;
    min-width:220px;
    width:min(520px, 100%);
  }

  .grid{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(240px,1fr));
    gap:16px;
    margin-top:14px;
  }

  .card{
    background:var(--card);
    border:1px solid var(--line);
    border-radius:16px;
    overflow:hidden;
    cursor:pointer;
    transition:.22s;
  }
  .card:hover{
    transform:translateY(-3px) scale(1.02);
    box-shadow:0 0 18px rgba(255,255,255,.14);
  }

  .poster{
    width:100%;
    height:160px;
    object-fit:cover;
    background:#000;
    display:block;
  }

  .pad{ padding:14px; }
  .title{ font-weight:900; font-size:16px; line-height:1.2; }
  .meta{ margin-top:8px; color:var(--muted); font-size:12px; }

  /* Episodes view */
  .panel{
    background:rgba(255,255,255,.04);
    border:1px solid var(--line);
    border-radius:16px;
    padding:14px;
  }
  .panel h2{ margin:0 0 8px; font-size:18px; }
  .panel p{ margin:0 0 12px; color:var(--muted); font-size:13px; }

  .ep-grid{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
    gap:12px;
  }
  .ep{
    background:rgba(255,255,255,.06);
    border:1px solid var(--line);
    border-radius:14px;
    padding:12px;
    cursor:pointer;
    transition:.18s;
  }
  .ep:hover{ transform:scale(1.02); box-shadow:0 0 14px rgba(0,0,0,.4); }
  .ep b{ display:block; font-size:14px; }
  .ep small{ color:var(--muted); }

  .toolbar{
    display:flex;
    gap:10px;
    align-items:center;
    flex-wrap:wrap;
    margin-bottom:14px;
  }
  .btn{
    background:rgba(255,255,255,.10);
    border:1px solid rgba(255,255,255,.14);
    color:#fff;
    padding:10px 14px;
    border-radius:12px;
    cursor:pointer;
    font-weight:800;
    font-size:14px;
  }
  .btn:hover{ background:rgba(255,255,255,.16); }

  /* Player */
  #playerWrap{
    position:fixed;
    inset:0;
    background:#000;
    display:none;
    z-index:50;
  }

  /* Sem barra nenhuma na tela */
  #topbar{ display:none !important; }

  iframe{
    width:100%;
    height:100%;
    border:none;
    display:block;
  }

  .hide{ display:none !important; }
</style>
</head>

<body>

<header>
  ðŸŽ¬ Minha TV
  <span class="sub">Clique no Donghua â†’ escolha o episÃ³dio â†’ assista sem nada na tela.</span>
</header>

<div class="wrap">

  <!-- HOME -->
  <div id="homeView">
    <div class="toolbar">
      <input id="homeSearch" placeholder="Buscar donghua..." />
    </div>
    <div class="grid" id="donghuaGrid"></div>
  </div>

  <!-- EPISODES -->
  <div id="episodesView" class="hide">
    <div class="toolbar">
      <button class="btn" id="backHome">â¬… Voltar</button>
      <input id="epSearch" placeholder="Buscar episÃ³dio..." />
    </div>

    <div class="panel">
      <h2 id="seriesTitle"></h2>
      <p id="seriesInfo"></p>
      <div class="ep-grid" id="episodesGrid"></div>
    </div>
  </div>

</div>

<!-- PLAYER -->
<div id="playerWrap">
  <!-- sem botÃµes, sem barra -->
  <iframe id="frame" allow="autoplay; fullscreen" allowfullscreen></iframe>
</div>

<script>
/**
 * IMPORTANTE:
 * 1) Coloque sua imagem no repo como "cover.jpg" na mesma pasta do index.html
 * 2) Se quiser trocar a capa depois, sÃ³ substitui o arquivo cover.jpg.
 */
const LIBRARY = [
  {
    key: "armji",
    name: "A Record of a Mortal's Journey to Immortality",
    type: "Donghua",
    poster: "./cover.jpg",
    episodes: [
      { title: "EpisÃ³dio 1",  id: "15Uw8zwbuJ94IVXiu4NniPMwobUcx0yoK" },
      { title: "EpisÃ³dio 2",  id: "1EZBO4PzRVkQAINkyHAH_UuHDRps-XH_l" },
      { title: "EpisÃ³dio 3",  id: "1LhBErULpP38lKH-xYQ-HFwYRchQzJCP9" },
      { title: "EpisÃ³dio 4",  id: "1bhz4CM-i3m2ESQoRUaD78S800Iy-hvqG" },
      { title: "EpisÃ³dio 5",  id: "1sqwrwEx-G5uftPceLmUpqnk0YY4CBcfT" },
      { title: "EpisÃ³dio 6",  id: "1yimkUkRfLv0f6Ub6yX4t5FIRhFnGhzUA" },
      { title: "EpisÃ³dio 7",  id: "1daQ4h6P_og2BOY9FTyqwRlvwQVHajUIG" },
      { title: "EpisÃ³dio 8",  id: "1gIUw1d2ZbOB5bw8e0DXPLFm6zg3kYKuy" },
      { title: "EpisÃ³dio 9",  id: "1QaH6tIntFBCxsr46e0Mn3eVbepYdY_o3" },
      { title: "EpisÃ³dio 10", id: "1F4Y1WydQI6BzwmI-xic9ykauQMEWoB2q" },
      { title: "EpisÃ³dio 11", id: "1FA016NeIjWBkUr6LEPj3SQQvCtXEq-ej" },
    ]
  }
];

let currentSeries = null;
let currentIndex = 0;

const homeView = document.getElementById("homeView");
const episodesView = document.getElementById("episodesView");

const donghuaGrid = document.getElementById("donghuaGrid");
const homeSearch = document.getElementById("homeSearch");

const backHome = document.getElementById("backHome");
const seriesTitle = document.getElementById("seriesTitle");
const seriesInfo = document.getElementById("seriesInfo");
const episodesGrid = document.getElementById("episodesGrid");
const epSearch = document.getElementById("epSearch");

const playerWrap = document.getElementById("playerWrap");
const frame = document.getElementById("frame");

function renderHome(){
  const q = (homeSearch.value || "").trim().toLowerCase();
  donghuaGrid.innerHTML = "";

  LIBRARY
    .filter(s => s.name.toLowerCase().includes(q))
    .forEach(series => {
      const div = document.createElement("div");
      div.className = "card";
      div.innerHTML = `
        <img class="poster" src="${series.poster}" alt="">
        <div class="pad">
          <div class="title">${escapeHtml(series.name)}</div>
          <div class="meta">${escapeHtml(series.type)} â€¢ ${series.episodes.length} eps</div>
        </div>
      `;
      div.onclick = () => openSeries(series.key);
      donghuaGrid.appendChild(div);
    });
}

homeSearch.addEventListener("input", renderHome);

function openSeries(key){
  currentSeries = LIBRARY.find(s => s.key === key);
  if(!currentSeries) return;

  homeView.classList.add("hide");
  episodesView.classList.remove("hide");

  seriesTitle.textContent = currentSeries.name;
  seriesInfo.textContent = `${currentSeries.type} â€¢ ${currentSeries.episodes.length} episÃ³dios`;

  epSearch.value = "";
  renderEpisodes();
}

function backToHome(){
  episodesView.classList.add("hide");
  homeView.classList.remove("hide");
  currentSeries = null;
}
backHome.addEventListener("click", backToHome);

function renderEpisodes(){
  if(!currentSeries) return;

  const q = (epSearch.value || "").trim().toLowerCase();
  episodesGrid.innerHTML = "";

  currentSeries.episodes
    .map((ep, idx) => ({...ep, idx}))
    .filter(ep => ep.title.toLowerCase().includes(q))
    .forEach(ep => {
      const div = document.createElement("div");
      div.className = "ep";
      div.innerHTML = `<b>${escapeHtml(ep.title)}</b><small>Clique para assistir</small>`;
      div.onclick = () => playEpisode(ep.idx);
      episodesGrid.appendChild(div);
    });
}

epSearch.addEventListener("input", renderEpisodes);

function tryFullscreen(){
  // Em muitas TVs isso falha â€” tudo bem. O player jÃ¡ estÃ¡ ocupando 100% da tela.
  try{
    if (playerWrap.requestFullscreen) playerWrap.requestFullscreen();
  } catch {}
}

function playEpisode(idx){
  if(!currentSeries) return;
  currentIndex = idx;

  const ep = currentSeries.episodes[currentIndex];
  playerWrap.style.display = "block";

  // Drive preview:
  frame.src = `https://drive.google.com/file/d/${ep.id}/preview`;

  // tenta fullscreen (se suportado)
  setTimeout(tryFullscreen, 200);
}

function closePlayer(){
  frame.src = "";
  playerWrap.style.display = "none";
}

// Fechar com ESC (se houver teclado)
document.addEventListener("keydown", (e) => {
  if (e.key === "Escape") closePlayer();
});

// Clique no fundo fecha (opcional) â€” se achar ruim, me fala que eu tiro
playerWrap.addEventListener("click", () => closePlayer());

function escapeHtml(s){
  return (s||"").replace(/[&<>"']/g, c => ({
    "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"
  }[c]));
}

renderHome();
</script>

</body>
</html>
